# Internationalization (i18n) with next-intl

## Implemented structure

```
src/
├── app/
│   └── [locale]/                    # Dynamic route segment for locale
│       ├── layout.tsx               # Root layout with NextIntlClientProvider
│       └── (landing)/
│           ├── layout.tsx
│           ├── page.tsx
│           └── _components/
│               └── layout/
│                   ├── Header.tsx   # i18n enabled
│                   └── HeaderNav.tsx # i18n enabled
├── i18n/
│   ├── routing.ts                   # Locales configuration
│   ├── request.ts                   # Server-side configuration
│   └── messages/
│       ├── es/
│       │   ├── common.json          # Shared translations (buttons, etc)
│       │   └── header.json          # Header translations
│       └── en/
│           ├── common.json
│           └── header.json
└── middleware.ts                    # Request interception for routing
```

## Configured locales

- Spanish (es) - Default locale
- English (en)

## Configuration

### 1. Available locales (`src/i18n/routing.ts`)

```typescript
export const routing = defineRouting({
  locales: ["en", "es"],
  defaultLocale: "es",
});
```

### 2. Messages loading (`src/i18n/request.ts`)

Messages are loaded per file using the defined structure:

```typescript
messages: {
  common: (await import(`./messages/${locale}/common.json`)).default,
  header: (await import(`./messages/${locale}/header.json`)).default,
}
```

To add new translation files:

1. Create the file in `src/i18n/messages/es/` and `src/i18n/messages/en/`
2. Add the import in `src/i18n/request.ts`

## Usage in components

### Server Components (default)

```typescript
import { useTranslations } from "next-intl";

export default function Header() {
  const t = useTranslations("header");

  return <button>{t("getStarted")}</button>;
}
```

### Nested namespaces

```typescript
const t = useTranslations("header.nav");

return <Link href="#">{t("features")}</Link>;
```

## Locale URLs

URLs automatically include the locale:

- `/es` -> Spanish (default, may redirect to `/`)
- `/en` -> English

Examples:

- `http://localhost:3000/es`
- `http://localhost:3000/en`

## Add new languages

1. Add the locale in `src/i18n/routing.ts`:

```typescript
export const routing = defineRouting({
  locales: ["en", "es", "ca"], // Add Catalan
  defaultLocale: "es",
});
```

2. Create a `src/i18n/messages/ca/` folder with JSON files

3. Update the matcher in `src/middleware.ts`:

```typescript
export const config = {
  matcher: ["/", "/(es|en|ca)/:path*"], // Add "ca"
};
```

## Add new translation files

Example: add translations for the footer

1. Create files:
   - `src/i18n/messages/es/footer.json`
   - `src/i18n/messages/en/footer.json`

2. Update `src/i18n/request.ts`:

```typescript
return {
  locale,
  messages: {
    common: (await import(`./messages/${locale}/common.json`)).default,
    header: (await import(`./messages/${locale}/header.json`)).default,
    footer: (await import(`./messages/${locale}/footer.json`)).default, // New
  },
};
```

3. Use it in a component:

```typescript
const t = useTranslations("footer");
```

## Current status

### Components with i18n enabled

- Header (`src/app/[locale]/(landing)/_components/layout/Header.tsx`)
- HeaderNav (`src/app/[locale]/(landing)/_components/layout/HeaderNav.tsx`)

### Translated strings

Header:

- "Get started" / "Comenzar"

HeaderNav:

- "Features" / "Características"
- "How it works" / "Cómo funciona"
- "Pricing" / "Precios"
- "FAQ" / "Preguntas frecuentes"

## Useful commands

```bash
# Development
npm run dev

# Build (checks i18n)
npm run build

# Type check
npm run type-check
```

## Resources

- https://next-intl-docs.vercel.app/
- https://next-intl-docs.vercel.app/docs/getting-started/app-router
